!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery)}(function($){function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;if(event=$.event.fix(orgEvent),event.type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}if(absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||lowestDelta>absDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left,offsetY=event.clientY-boundingRect.top}return event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.offsetX=offsetX,event.offsetY=offsetY,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120===0}var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null;$.removeData(this,"mousewheel-line-height"),$.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem["offsetParent"in $.fn?"offsetParent":"parent"]();return $parent.length||($parent=$("body")),parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})})},{}],2:[function(require,module,exports){!function($,win,doc){var _getCaretInfo=function(element){var res={text:"",start:0,end:0};if(!element.value)return res;try{if(win.getSelection)res.start=element.selectionStart,res.end=element.selectionEnd,res.text=element.value.slice(res.start,res.end);else if(doc.selection){element.focus();var range=doc.selection.createRange(),range2=doc.body.createTextRange();res.text=range.text;try{range2.moveToElementText(element),range2.setEndPoint("StartToStart",range)}catch(e){range2=element.createTextRange(),range2.setEndPoint("StartToStart",range)}res.start=element.value.length-range2.text.length,res.end=res.start+range.text.length}}catch(e){}return res},_CaretOperation={getPos:function(element){var tmp=_getCaretInfo(element);return{start:tmp.start,end:tmp.end}},setPos:function(element,toRange,caret){caret=this._caretMode(caret),"start"===caret?toRange.end=toRange.start:"end"===caret&&(toRange.start=toRange.end),element.focus();try{if(element.createTextRange){var range=element.createTextRange();win.navigator.userAgent.toLowerCase().indexOf("msie")>=0&&(toRange.start=element.value.substr(0,toRange.start).replace(/\r/g,"").length,toRange.end=element.value.substr(0,toRange.end).replace(/\r/g,"").length),range.collapse(!0),range.moveStart("character",toRange.start),range.moveEnd("character",toRange.end-toRange.start),range.select()}else element.setSelectionRange&&element.setSelectionRange(toRange.start,toRange.end)}catch(e){}},getText:function(element){return _getCaretInfo(element).text},_caretMode:function(caret){switch(caret=caret||"keep",caret===!1&&(caret="end"),caret){case"keep":case"start":case"end":break;default:caret="keep"}return caret},replace:function(element,text,caret){var tmp=_getCaretInfo(element),orig=element.value,pos=$(element).scrollTop(),range={start:tmp.start,end:tmp.start+text.length};element.value=orig.substr(0,tmp.start)+text+orig.substr(tmp.end),$(element).scrollTop(pos),this.setPos(element,range,caret)},insertBefore:function(element,text,caret){var tmp=_getCaretInfo(element),orig=element.value,pos=$(element).scrollTop(),range={start:tmp.start+text.length,end:tmp.end+text.length};element.value=orig.substr(0,tmp.start)+text+orig.substr(tmp.start),$(element).scrollTop(pos),this.setPos(element,range,caret)},insertAfter:function(element,text,caret){var tmp=_getCaretInfo(element),orig=element.value,pos=$(element).scrollTop(),range={start:tmp.start,end:tmp.end};element.value=orig.substr(0,tmp.end)+text+orig.substr(tmp.end),$(element).scrollTop(pos),this.setPos(element,range,caret)}};$.extend({selection:function(mode){var getText="text"===(mode||"text").toLowerCase();try{if(win.getSelection){if(getText)return win.getSelection().toString();var range,sel=win.getSelection();return sel.getRangeAt?range=sel.getRangeAt(0):(range=doc.createRange(),range.setStart(sel.anchorNode,sel.anchorOffset),range.setEnd(sel.focusNode,sel.focusOffset)),$("<div></div>").append(range.cloneContents()).html()}if(doc.selection)return getText?doc.selection.createRange().text:doc.selection.createRange().htmlText}catch(e){}return""}}),$.fn.extend({selection:function(mode,opts){switch(opts=opts||{},mode){case"getPos":return _CaretOperation.getPos(this[0]);case"setPos":return this.each(function(){_CaretOperation.setPos(this,opts)});case"replace":return this.each(function(){_CaretOperation.replace(this,opts.text,opts.caret)});case"insert":return this.each(function(){"before"===opts.mode?_CaretOperation.insertBefore(this,opts.text,opts.caret):_CaretOperation.insertAfter(this,opts.text,opts.caret)});case"get":default:return _CaretOperation.getText(this[0])}return this}})}(jQuery,window,window.document)},{}],3:[function(require,module,exports){!function t(e,n,r){function o(l,s){if(!n[l]){if(!e[l]){var a="function"==typeof require&&require;if(!s&&a)return a(l,!0);if(i)return i(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[l]={exports:{}};e[l][0].call(u.exports,function(t){var n=e[l][1][t];return o(n?n:t)},u,u.exports,t,e,n,r)}return n[l].exports}for(var i="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,e,n){"use strict";function r(t){t.fn.perfectScrollbar=function(e){return this.each(function(){if("object"==typeof e||"undefined"==typeof e){var n=e;i.get(this)||o.initialize(this,n)}else{var r=e;"update"===r?o.update(this):"destroy"===r&&o.destroy(this)}return t(this)})}}var o=t("../main"),i=t("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],r);else{var l=window.jQuery?window.jQuery:window.$;"undefined"!=typeof l&&r(l)}e.exports=r},{"../main":7,"../plugin/instances":18}],2:[function(t,e,n){"use strict";function r(t,e){var n=t.className.split(" ");n.indexOf(e)<0&&n.push(e),t.className=n.join(" ")}function o(t,e){var n=t.className.split(" "),r=n.indexOf(e);r>=0&&n.splice(r,1),t.className=n.join(" ")}n.add=function(t,e){t.classList?t.classList.add(e):r(t,e)},n.remove=function(t,e){t.classList?t.classList.remove(e):o(t,e)},n.list=function(t){return t.classList?Array.prototype.slice.apply(t.classList):t.className.split(" ")}},{}],3:[function(t,e,n){"use strict";function r(t,e){return window.getComputedStyle(t)[e]}function o(t,e,n){return"number"==typeof n&&(n=n.toString()+"px"),t.style[e]=n,t}function i(t,e){for(var n in e){var r=e[n];"number"==typeof r&&(r=r.toString()+"px"),t.style[n]=r}return t}var l={};l.e=function(t,e){var n=document.createElement(t);return n.className=e,n},l.appendTo=function(t,e){return e.appendChild(t),t},l.css=function(t,e,n){return"object"==typeof e?i(t,e):"undefined"==typeof n?r(t,e):o(t,e,n)},l.matches=function(t,e){return"undefined"!=typeof t.matches?t.matches(e):"undefined"!=typeof t.matchesSelector?t.matchesSelector(e):"undefined"!=typeof t.webkitMatchesSelector?t.webkitMatchesSelector(e):"undefined"!=typeof t.mozMatchesSelector?t.mozMatchesSelector(e):"undefined"!=typeof t.msMatchesSelector?t.msMatchesSelector(e):void 0},l.remove=function(t){"undefined"!=typeof t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)},l.queryChildren=function(t,e){return Array.prototype.filter.call(t.childNodes,function(t){return l.matches(t,e)})},e.exports=l},{}],4:[function(t,e,n){"use strict";var r=function(t){this.element=t,this.events={}};r.prototype.bind=function(t,e){"undefined"==typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this.element.addEventListener(t,e,!1)},r.prototype.unbind=function(t,e){var n="undefined"!=typeof e;this.events[t]=this.events[t].filter(function(r){return n&&r!==e?!0:(this.element.removeEventListener(t,r,!1),!1)},this)},r.prototype.unbindAll=function(){for(var t in this.events)this.unbind(t)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return"undefined"==typeof e&&(e=new r(t),this.eventElements.push(e)),e},o.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},o.prototype.unbind=function(t,e,n){this.eventElement(t).unbind(e,n)},o.prototype.unbindAll=function(){for(var t=0;t<this.eventElements.length;t++)this.eventElements[t].unbindAll()},o.prototype.once=function(t,e,n){var r=this.eventElement(t),o=function(t){r.unbind(e,o),n(t)};r.bind(e,o)},e.exports=o},{}],5:[function(t,e,n){"use strict";e.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()},{}],6:[function(t,e,n){"use strict";var r=t("./class"),o=t("./dom");n.toInt=function(t){return parseInt(t,10)||0},n.clone=function(t){if(null===t)return null;if("object"==typeof t){var e={};for(var n in t)e[n]=this.clone(t[n]);return e}return t},n.extend=function(t,e){var n=this.clone(t);for(var r in e)n[r]=this.clone(e[r]);return n},n.isEditable=function(t){return o.matches(t,"input,[contenteditable]")||o.matches(t,"select,[contenteditable]")||o.matches(t,"textarea,[contenteditable]")||o.matches(t,"button,[contenteditable]")},n.removePsClasses=function(t){for(var e=r.list(t),n=0;n<e.length;n++){var o=e[n];0===o.indexOf("ps-")&&r.remove(t,o)}},n.outerWidth=function(t){return this.toInt(o.css(t,"width"))+this.toInt(o.css(t,"paddingLeft"))+this.toInt(o.css(t,"paddingRight"))+this.toInt(o.css(t,"borderLeftWidth"))+this.toInt(o.css(t,"borderRightWidth"))},n.startScrolling=function(t,e){r.add(t,"ps-in-scrolling"),"undefined"!=typeof e?r.add(t,"ps-"+e):(r.add(t,"ps-x"),r.add(t,"ps-y"))},n.stopScrolling=function(t,e){r.remove(t,"ps-in-scrolling"),"undefined"!=typeof e?r.remove(t,"ps-"+e):(r.remove(t,"ps-x"),r.remove(t,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(t,e,n){"use strict";var r=t("./plugin/destroy"),o=t("./plugin/initialize"),i=t("./plugin/update");e.exports={initialize:o,update:i,destroy:r}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(t,e,n){"use strict";e.exports={maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,useKeyboard:!0,useSelectionScroll:!1,wheelPropagation:!1,wheelSpeed:1}},{}],9:[function(t,e,n){"use strict";var r=t("../lib/dom"),o=t("../lib/helper"),i=t("./instances");e.exports=function(t){var e=i.get(t);e&&(e.event.unbindAll(),r.remove(e.scrollbarX),r.remove(e.scrollbarY),r.remove(e.scrollbarXRail),r.remove(e.scrollbarYRail),o.removePsClasses(t),i.remove(t))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(t,e,n){"use strict";function r(t,e){function n(t){return t.getBoundingClientRect()}var r=window.Event.prototype.stopPropagation.bind;e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarY,"click",r),e.event.bind(e.scrollbarYRail,"click",function(r){var i=o.toInt(e.scrollbarYHeight/2),a=e.railYRatio*(r.pageY-window.scrollY-n(e.scrollbarYRail).top-i),c=e.railYRatio*(e.railYHeight-e.scrollbarYHeight),u=a/c;0>u?u=0:u>1&&(u=1),s(t,"top",(e.contentHeight-e.containerHeight)*u),l(t),r.stopPropagation()}),e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarX,"click",r),e.event.bind(e.scrollbarXRail,"click",function(r){var i=o.toInt(e.scrollbarXWidth/2),a=e.railXRatio*(r.pageX-window.scrollX-n(e.scrollbarXRail).left-i),c=e.railXRatio*(e.railXWidth-e.scrollbarXWidth),u=a/c;0>u?u=0:u>1&&(u=1),s(t,"left",(e.contentWidth-e.containerWidth)*u-e.negativeScrollAdjustment),l(t),r.stopPropagation()})}var o=t("../../lib/helper"),i=t("../instances"),l=t("../update-geometry"),s=t("../update-scroll");e.exports=function(t){var e=i.get(t);r(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(t,e,n){"use strict";function r(t,e){function n(n){var o=r+n*e.railXRatio,i=e.scrollbarXRail.getBoundingClientRect().left+e.railXRatio*(e.railXWidth-e.scrollbarXWidth);0>o?e.scrollbarXLeft=0:o>i?e.scrollbarXLeft=i:e.scrollbarXLeft=o;var s=l.toInt(e.scrollbarXLeft*(e.contentWidth-e.containerWidth)/(e.containerWidth-e.railXRatio*e.scrollbarXWidth))-e.negativeScrollAdjustment;c(t,"left",s)}var r=null,o=null,s=function(e){n(e.pageX-o),a(t),e.stopPropagation(),e.preventDefault()},u=function(){l.stopScrolling(t,"x"),e.event.unbind(e.ownerDocument,"mousemove",s)};e.event.bind(e.scrollbarX,"mousedown",function(n){o=n.pageX,r=l.toInt(i.css(e.scrollbarX,"left"))*e.railXRatio,l.startScrolling(t,"x"),e.event.bind(e.ownerDocument,"mousemove",s),e.event.once(e.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function o(t,e){function n(n){var o=r+n*e.railYRatio,i=e.scrollbarYRail.getBoundingClientRect().top+e.railYRatio*(e.railYHeight-e.scrollbarYHeight);0>o?e.scrollbarYTop=0:o>i?e.scrollbarYTop=i:e.scrollbarYTop=o;var s=l.toInt(e.scrollbarYTop*(e.contentHeight-e.containerHeight)/(e.containerHeight-e.railYRatio*e.scrollbarYHeight));c(t,"top",s)}var r=null,o=null,s=function(e){n(e.pageY-o),a(t),e.stopPropagation(),e.preventDefault()},u=function(){l.stopScrolling(t,"y"),e.event.unbind(e.ownerDocument,"mousemove",s)};e.event.bind(e.scrollbarY,"mousedown",function(n){o=n.pageY,r=l.toInt(i.css(e.scrollbarY,"top"))*e.railYRatio,l.startScrolling(t,"y"),e.event.bind(e.ownerDocument,"mousemove",s),e.event.once(e.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var i=t("../../lib/dom"),l=t("../../lib/helper"),s=t("../instances"),a=t("../update-geometry"),c=t("../update-scroll");e.exports=function(t){var e=s.get(t);r(t,e),o(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var o=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&0>r)return!e.settings.wheelPropagation}var i=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===i&&0>n||i>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}var r=!1;e.event.bind(t,"mouseenter",function(){r=!0}),e.event.bind(t,"mouseleave",function(){r=!1});var i=!1;e.event.bind(e.ownerDocument,"keydown",function(a){if((!a.isDefaultPrevented||!a.isDefaultPrevented())&&r){var c=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(c){for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(o.isEditable(c))return}var u=0,d=0;switch(a.which){case 37:u=-30;break;case 38:d=30;break;case 39:u=30;break;case 40:d=-30;break;case 33:d=90;break;case 32:d=a.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=a.ctrlKey?-e.contentHeight:-e.containerHeight;break;case 36:d=a.ctrlKey?t.scrollTop:e.containerHeight;break;default:return}s(t,"top",t.scrollTop-d),s(t,"left",t.scrollLeft+u),l(t),i=n(u,d),i&&a.preventDefault()}})}var o=t("../../lib/helper"),i=t("../instances"),l=t("../update-geometry"),s=t("../update-scroll");e.exports=function(t){var e=i.get(t);r(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var o=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&0>r)return!e.settings.wheelPropagation}var i=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===i&&0>n||i>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}function r(t){var e=t.deltaX,n=-1*t.deltaY;return("undefined"==typeof e||"undefined"==typeof n)&&(e=-1*t.wheelDeltaX/6,n=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,n*=10),e!==e&&n!==n&&(e=0,n=t.wheelDelta),[e,n]}function i(e,n){var r=t.querySelector("textarea:hover");if(r){var o=r.scrollHeight-r.clientHeight;if(o>0&&!(0===r.scrollTop&&n>0||r.scrollTop===o&&0>n))return!0;var i=r.scrollLeft-r.clientWidth;if(i>0&&!(0===r.scrollLeft&&0>e||r.scrollLeft===i&&e>0))return!0}return!1}function a(a){if(o.env.isWebKit||!t.querySelector("select:focus")){var u=r(a),d=u[0],p=u[1];i(d,p)||(c=!1,e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(p?s(t,"top",t.scrollTop-p*e.settings.wheelSpeed):s(t,"top",t.scrollTop+d*e.settings.wheelSpeed),c=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(d?s(t,"left",t.scrollLeft+d*e.settings.wheelSpeed):s(t,"left",t.scrollLeft-p*e.settings.wheelSpeed),c=!0):(s(t,"top",t.scrollTop-p*e.settings.wheelSpeed),s(t,"left",t.scrollLeft+d*e.settings.wheelSpeed)),l(t),c=c||n(d,p),c&&(a.stopPropagation(),a.preventDefault()))}}var c=!1;"undefined"!=typeof window.onwheel?e.event.bind(t,"wheel",a):"undefined"!=typeof window.onmousewheel&&e.event.bind(t,"mousewheel",a)}var o=t("../../lib/helper"),i=t("../instances"),l=t("../update-geometry"),s=t("../update-scroll");e.exports=function(t){var e=i.get(t);r(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(t,e,n){"use strict";function r(t,e){e.event.bind(t,"scroll",function(){i(t)})}var o=t("../instances"),i=t("../update-geometry");e.exports=function(t){var e=o.get(t);r(t,e)}},{"../instances":18,"../update-geometry":19}],15:[function(t,e,n){"use strict";function r(t,e){function n(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}function r(){c||(c=setInterval(function(){return i.get(t)?(s(t,"top",t.scrollTop+u.top),s(t,"left",t.scrollLeft+u.left),void l(t)):void clearInterval(c)},50))}function a(){c&&(clearInterval(c),c=null),o.stopScrolling(t)}var c=null,u={top:0,left:0},d=!1;e.event.bind(e.ownerDocument,"selectionchange",function(){t.contains(n())?d=!0:(d=!1,a())}),e.event.bind(window,"mouseup",function(){d&&(d=!1,a())}),e.event.bind(window,"mousemove",function(e){if(d){var n={x:e.pageX,y:e.pageY},i={left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight};n.x<i.left+3?(u.left=-5,o.startScrolling(t,"x")):n.x>i.right-3?(u.left=5,o.startScrolling(t,"x")):u.left=0,n.y<i.top+3?(i.top+3-n.y<5?u.top=-5:u.top=-20,o.startScrolling(t,"y")):n.y>i.bottom-3?(n.y-i.bottom+3<5?u.top=5:u.top=20,o.startScrolling(t,"y")):u.top=0,0===u.top&&0===u.left?a():r()}})}var o=t("../../lib/helper"),i=t("../instances"),l=t("../update-geometry"),s=t("../update-scroll");e.exports=function(t){var e=i.get(t);r(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(t,e,n){"use strict";function r(t,e,n,r){function s(n,r){var o=t.scrollTop,i=t.scrollLeft,l=Math.abs(n),s=Math.abs(r);if(s>l){if(0>r&&o===e.contentHeight-e.containerHeight||r>0&&0===o)return!e.settings.swipePropagation}else if(l>s&&(0>n&&i===e.contentWidth-e.containerWidth||n>0&&0===i))return!e.settings.swipePropagation;return!0}function a(e,n){l(t,"top",t.scrollTop-n),l(t,"left",t.scrollLeft-e),i(t)}function c(){Y=!0}function u(){Y=!1}function d(t){return t.targetTouches?t.targetTouches[0]:t}function p(t){return t.targetTouches&&1===t.targetTouches.length?!0:t.pointerType&&"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE?!0:!1}function f(t){if(p(t)){w=!0;var e=d(t);b.pageX=e.pageX,b.pageY=e.pageY,g=(new Date).getTime(),null!==y&&clearInterval(y),t.stopPropagation()}}function h(t){if(!Y&&w&&p(t)){var e=d(t),n={pageX:e.pageX,pageY:e.pageY},r=n.pageX-b.pageX,o=n.pageY-b.pageY;a(r,o),b=n;var i=(new Date).getTime(),l=i-g;l>0&&(m.x=r/l,m.y=o/l,g=i),s(r,o)&&(t.stopPropagation(),t.preventDefault())}}function v(){!Y&&w&&(w=!1,clearInterval(y),y=setInterval(function(){return o.get(t)?Math.abs(m.x)<.01&&Math.abs(m.y)<.01?void clearInterval(y):(a(30*m.x,30*m.y),m.x*=.8,void(m.y*=.8)):void clearInterval(y)},10))}var b={},g=0,m={},y=null,Y=!1,w=!1;n&&(e.event.bind(window,"touchstart",c),e.event.bind(window,"touchend",u),e.event.bind(t,"touchstart",f),e.event.bind(t,"touchmove",h),e.event.bind(t,"touchend",v)),r&&(window.PointerEvent?(e.event.bind(window,"pointerdown",c),e.event.bind(window,"pointerup",u),e.event.bind(t,"pointerdown",f),e.event.bind(t,"pointermove",h),e.event.bind(t,"pointerup",v)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",c),e.event.bind(window,"MSPointerUp",u),e.event.bind(t,"MSPointerDown",f),e.event.bind(t,"MSPointerMove",h),e.event.bind(t,"MSPointerUp",v)))}var o=t("../instances"),i=t("../update-geometry"),l=t("../update-scroll");e.exports=function(t,e,n){var i=o.get(t);r(t,i,e,n)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(t,e,n){"use strict";var r=t("../lib/class"),o=t("../lib/helper"),i=t("./instances"),l=t("./update-geometry"),s=t("./handler/click-rail"),a=t("./handler/drag-scrollbar"),c=t("./handler/keyboard"),u=t("./handler/mouse-wheel"),d=t("./handler/native-scroll"),p=t("./handler/selection"),f=t("./handler/touch");e.exports=function(t,e){e="object"==typeof e?e:{},r.add(t,"ps-container");var n=i.add(t);n.settings=o.extend(n.settings,e),s(t),a(t),u(t),d(t),n.settings.useSelectionScroll&&p(t),(o.env.supportsTouch||o.env.supportsIePointer)&&f(t,o.env.supportsTouch,o.env.supportsIePointer),n.settings.useKeyboard&&c(t),l(t)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(t,e,n){"use strict";function r(t){var e=this;e.settings=d.clone(a),e.containerWidth=null,e.containerHeight=null,e.contentWidth=null,e.contentHeight=null,e.isRtl="rtl"===s.css(t,"direction"),e.isNegativeScroll=function(){var e=t.scrollLeft,n=null;return t.scrollLeft=-1,n=t.scrollLeft<0,t.scrollLeft=e,n}(),e.negativeScrollAdjustment=e.isNegativeScroll?t.scrollWidth-t.clientWidth:0,e.event=new c,e.ownerDocument=t.ownerDocument||document,e.scrollbarXRail=s.appendTo(s.e("div","ps-scrollbar-x-rail"),t),e.scrollbarX=s.appendTo(s.e("div","ps-scrollbar-x"),e.scrollbarXRail),e.scrollbarXActive=null,e.scrollbarXWidth=null,e.scrollbarXLeft=null,e.scrollbarXBottom=d.toInt(s.css(e.scrollbarXRail,"bottom")),e.isScrollbarXUsingBottom=e.scrollbarXBottom===e.scrollbarXBottom,e.scrollbarXTop=e.isScrollbarXUsingBottom?null:d.toInt(s.css(e.scrollbarXRail,"top")),e.railBorderXWidth=d.toInt(s.css(e.scrollbarXRail,"borderLeftWidth"))+d.toInt(s.css(e.scrollbarXRail,"borderRightWidth")),s.css(e.scrollbarXRail,"display","block"),e.railXMarginWidth=d.toInt(s.css(e.scrollbarXRail,"marginLeft"))+d.toInt(s.css(e.scrollbarXRail,"marginRight")),s.css(e.scrollbarXRail,"display",""),e.railXWidth=null,e.railXRatio=null,e.scrollbarYRail=s.appendTo(s.e("div","ps-scrollbar-y-rail"),t),e.scrollbarY=s.appendTo(s.e("div","ps-scrollbar-y"),e.scrollbarYRail),e.scrollbarYActive=null,e.scrollbarYHeight=null,e.scrollbarYTop=null,e.scrollbarYRight=d.toInt(s.css(e.scrollbarYRail,"right")),e.isScrollbarYUsingRight=e.scrollbarYRight===e.scrollbarYRight,e.scrollbarYLeft=e.isScrollbarYUsingRight?null:d.toInt(s.css(e.scrollbarYRail,"left")),e.scrollbarYOuterWidth=e.isRtl?d.outerWidth(e.scrollbarY):null,e.railBorderYWidth=d.toInt(s.css(e.scrollbarYRail,"borderTopWidth"))+d.toInt(s.css(e.scrollbarYRail,"borderBottomWidth")),s.css(e.scrollbarYRail,"display","block"),e.railYMarginHeight=d.toInt(s.css(e.scrollbarYRail,"marginTop"))+d.toInt(s.css(e.scrollbarYRail,"marginBottom")),s.css(e.scrollbarYRail,"display",""),e.railYHeight=null,e.railYRatio=null}function o(t){return"undefined"==typeof t.dataset?t.getAttribute("data-ps-id"):t.dataset.psId}function i(t,e){"undefined"==typeof t.dataset?t.setAttribute("data-ps-id",e):t.dataset.psId=e}function l(t){"undefined"==typeof t.dataset?t.removeAttribute("data-ps-id"):delete t.dataset.psId}var s=t("../lib/dom"),a=t("./default-setting"),c=t("../lib/event-manager"),u=t("../lib/guid"),d=t("../lib/helper"),p={};n.add=function(t){var e=u();return i(t,e),p[e]=new r(t),p[e]},n.remove=function(t){delete p[o(t)],l(t)},n.get=function(t){return p[o(t)]}},{"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(t,e,n){"use strict";function r(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function o(t,e){var n={width:e.railXWidth};e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-t.scrollTop:n.top=e.scrollbarXTop+t.scrollTop,l.css(e.scrollbarXRail,n);var r={top:t.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?r.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:r.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?r.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:r.left=e.scrollbarYLeft+t.scrollLeft,l.css(e.scrollbarYRail,r),l.css(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),l.css(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}var i=t("../lib/class"),l=t("../lib/dom"),s=t("../lib/helper"),a=t("./instances"),c=t("./update-scroll");e.exports=function(t){var e=a.get(t);e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight;var n;t.contains(e.scrollbarXRail)||(n=l.queryChildren(t,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(t){l.remove(t)}),l.appendTo(e.scrollbarXRail,t)),t.contains(e.scrollbarYRail)||(n=l.queryChildren(t,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(t){l.remove(t)}),l.appendTo(e.scrollbarYRail,t)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=r(e,s.toInt(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=s.toInt((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):(e.scrollbarXActive=!1,e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=0),!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=r(e,s.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=s.toInt(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):(e.scrollbarYActive=!1,e.scrollbarYHeight=0,e.scrollbarYTop=0,c(t,"top",0)),e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),o(t,e),i[e.scrollbarXActive?"add":"remove"](t,"ps-active-x"),i[e.scrollbarYActive?"add":"remove"](t,"ps-active-y")}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(t,e,n){"use strict";var r,o,i=t("./instances"),l=document.createEvent("Event"),s=document.createEvent("Event"),a=document.createEvent("Event"),c=document.createEvent("Event"),u=document.createEvent("Event"),d=document.createEvent("Event"),p=document.createEvent("Event"),f=document.createEvent("Event"),h=document.createEvent("Event"),v=document.createEvent("Event");l.initEvent("ps-scroll-up",!0,!0),s.initEvent("ps-scroll-down",!0,!0),a.initEvent("ps-scroll-left",!0,!0),c.initEvent("ps-scroll-right",!0,!0),u.initEvent("ps-scroll-y",!0,!0),d.initEvent("ps-scroll-x",!0,!0),p.initEvent("ps-x-reach-start",!0,!0),f.initEvent("ps-x-reach-end",!0,!0),h.initEvent("ps-y-reach-start",!0,!0),v.initEvent("ps-y-reach-end",!0,!0),e.exports=function(t,e,n){if("undefined"==typeof t)throw"You must provide an element to the update-scroll function";if("undefined"==typeof e)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";if("top"===e&&0>=n)return t.scrollTop=0,void t.dispatchEvent(h);if("left"===e&&0>=n)return t.scrollLeft=0,void t.dispatchEvent(p);var b=i.get(t);return"top"===e&&n>b.contentHeight-b.containerHeight?(t.scrollTop=b.contentHeight-b.containerHeight,void t.dispatchEvent(v)):"left"===e&&n>b.contentWidth-b.containerWidth?(t.scrollLeft=b.contentWidth-b.containerWidth,void t.dispatchEvent(f)):(r||(r=t.scrollTop),o||(o=t.scrollLeft),"top"===e&&r>n&&t.dispatchEvent(l),"top"===e&&n>r&&t.dispatchEvent(s),"left"===e&&o>n&&t.dispatchEvent(a),
"left"===e&&n>o&&t.dispatchEvent(c),"top"===e&&(t.scrollTop=r=n,t.dispatchEvent(u)),void("left"===e&&(t.scrollLeft=o=n,t.dispatchEvent(d))))}},{"./instances":18}],21:[function(t,e,n){"use strict";var r=t("../lib/dom"),o=t("../lib/helper"),i=t("./instances"),l=t("./update-geometry");e.exports=function(t){var e=i.get(t);e&&(e.negativeScrollAdjustment=e.isNegativeScroll?t.scrollWidth-t.clientWidth:0,r.css(e.scrollbarXRail,"display","block"),r.css(e.scrollbarYRail,"display","block"),e.railXMarginWidth=o.toInt(r.css(e.scrollbarXRail,"marginLeft"))+o.toInt(r.css(e.scrollbarXRail,"marginRight")),e.railYMarginHeight=o.toInt(r.css(e.scrollbarYRail,"marginTop"))+o.toInt(r.css(e.scrollbarYRail,"marginBottom")),r.css(e.scrollbarXRail,"display","none"),r.css(e.scrollbarYRail,"display","none"),l(t),r.css(e.scrollbarXRail,"display",""),r.css(e.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19}]},{},[1])},{}],4:[function(require,module,exports){window.cytubeEnhanced=new window.CytubeEnhanced($("title").text(),window.cytubeEnhancedSettings?window.cytubeEnhancedSettings.language||"en":"en",window.cytubeEnhancedSettings?window.cytubeEnhancedSettings.modulesSettings||{}:{})},{}],5:[function(require,module,exports){window.CytubeEnhanced=function(channelName,language,modulesSettings){"use strict";this.channelName=channelName;var translations={},modules={},MODULE_LOAD_TIMEOUT=1e4,MODULE_LOAD_PERIOD=100;this.getModule=function(moduleName){var promise=$.Deferred(),time=MODULE_LOAD_TIMEOUT;return function getModuleRecursive(){if(void 0!==modules[moduleName])promise.resolve(modules[moduleName]);else{if(0>=time)throw new Error("Load timeout for module "+moduleName+".");time-=MODULE_LOAD_PERIOD,setTimeout(getModuleRecursive,MODULE_LOAD_PERIOD)}}(),promise},this.addModule=function(moduleName,ModuleConstructor){if(this.isModulePermitted(moduleName)){var moduleSettings=modulesSettings[moduleName]||{};modules[moduleName]=new ModuleConstructor(this,moduleSettings),modules[moduleName].settings=moduleSettings}},this.configureModule=function(moduleName,moduleOptions){$.extend(!0,modulesSettings[moduleName],moduleOptions)},this.isModulePermitted=function(moduleName){return modulesSettings.hasOwnProperty(moduleName)&&modulesSettings[moduleName].hasOwnProperty("enabled")?modulesSettings[moduleName].enabled:!0},this.addTranslation=function(language,translationObject){translations[language]=translationObject},this.t=function(text){var translatedText=text;if("en"!==language&&void 0!==translations[language])if(-1!==text.indexOf("[.]")){var textWithNamespaces=text.split("[.]");translatedText=translations[language][textWithNamespaces[0]];for(var namespace=1,namespacesLen=textWithNamespaces.length;namespacesLen>namespace;namespace++)translatedText=translatedText[textWithNamespaces[namespace]]}else translatedText=translations[language][text];else-1!==text.indexOf("[.]")&&(translatedText=text.split("[.]").pop());return translatedText};var UserConfig=function(){this.options={},this.set=function(name,value){this.options[name]=value,window.setOpt(window.CHANNEL.name+"_config-"+name,value)},this.get=function(name){return this.options.hasOwnProperty(name)||(this.options[name]=window.getOrDefault(window.CHANNEL.name+"_config-"+name,void 0)),this.options[name]},this.toggle=function(name){var result=!this.get(name);return this.set(name,result),result}};this.userConfig=new UserConfig}},{}],6:[function(require,module,exports){window.cytubeEnhanced.addModule("additionalChatCommands",function(app,settings){"use strict";function isCommandPermitted(commandName){return-1!==settings.permittedCommands.indexOf("*")||-1!==settings.permittedCommands.indexOf(commandName)||!1}var that=this,defaultSettings={permittedCommands:["*"]};settings=$.extend({},defaultSettings,settings),this.askAnswers=["100%",app.t("qCommands[.]of course"),app.t("qCommands[.]yes"),app.t("qCommands[.]maybe"),app.t("qCommands[.]impossible"),app.t("qCommands[.]no way"),app.t("qCommands[.]don't think so"),app.t("qCommands[.]no"),"50/50",app.t("qCommands[.]fairy is busy"),app.t("qCommands[.]I regret to inform you")],this.randomQuotes=[],this.commandsList={"!pick ":{description:app.t("chatCommands[.]random option from the list of options (!pick option1, option2, option3)"),value:function(msg){var variants=msg.replace("!pick ","").split(",");return variants[Math.floor(Math.random()*variants.length)].trim()}},"!ask ":{description:app.t("chatCommands[.]asking a question with yes/no/... type answer (e.g. <i>!ask Will i be rich?</i>)"),value:function(){return that.askAnswers[Math.floor(Math.random()*that.askAnswers.length)]}},"!time":{description:app.t("chatCommands[.]show the current time"),value:function(){var h=(new Date).getHours();10>h&&(h="0"+h);var m=(new Date).getMinutes();return 10>m&&(m="0"+m),app.t("chatCommands[.]current time")+": "+h+":"+m}},"!dice":{description:app.t("chatCommands[.]throw a dice"),value:function(){return Math.floor(5*Math.random())+1}},"!roll":{description:app.t("chatCommands[.]random number between 0 and 999"),value:function(){var randomNumber=Math.floor(1e3*Math.random());return 100>randomNumber?randomNumber="0"+randomNumber:10>randomNumber&&(randomNumber="00"+randomNumber),randomNumber}},"!q":{description:app.t("chatCommands[.]show the random quote"),value:function(msg){return msg=0===that.randomQuotes.length?app.t("chatCommands[.]there aren't any quotes. If you are the channel administrator, you can download them from https://github.com/kaba99/cytube-enhanced/tree/master/files/extra/quotes_for_!q"):that.randomQuotes[Math.floor(Math.random()*(that.randomQuotes.length-1))]}},"!skip":{description:app.t("chatCommands[.]vote for the video skip"),value:function(msg){return window.socket.emit("voteskip"),msg=app.t("chatCommands[.]you have been voted for the video skip")},isAvailable:function(){return window.hasPermission("voteskip")}},"!next":{description:app.t("chatCommands[.]play the next video"),value:function(msg){return window.socket.emit("playNext"),msg=app.t("chatCommands[.]the next video is playing")},isAvailable:function(){return window.hasPermission("playlistjump")}},"!bump":{description:app.t("chatCommands[.]bump the last video"),value:function(msg){var $lastEntry=$("#queue").find(".queue_entry").last(),uid=$lastEntry.data("uid"),title=$lastEntry.find(".qe_title").html();return window.socket.emit("moveMedia",{from:uid,after:window.PL_CURRENT}),msg=app.t("chatCommands[.]the last video was bumped")+title},isAvailable:function(){return window.hasPermission("playlistmove")}},"!add":{description:app.t("chatCommands[.]adds the video to the end of the playlist (e.g. <i>!add https://www.youtube.com/watch?v=hh4gpgAZkc8</i>)"),value:function(msg){var parsed=window.parseMediaLink(msg.split("!add ")[1]);return null===parsed.id?msg=app.t("chatCommands[.]error: the wrong link"):(window.socket.emit("queue",{id:parsed.id,pos:"end",type:parsed.type}),msg=app.t("chatCommands[.]the video was added")),msg},isAvailable:function(){return window.hasPermission("playlistadd")}},"!now":{description:app.t("chatCommands[.]show the current video's name"),value:function(){return app.t("chatCommands[.]now: ")+$(".queue_active a").html()}},"!sm":{description:app.t("chatCommands[.]show the random emote"),value:function(){var smilesArray=window.CHANNEL.emotes.map(function(smile){return smile.name});return smilesArray[Math.floor(Math.random()*smilesArray.length)]+" "}},"!party":{description:app.t("chatCommands[.]the secret command"),value:function(){var IMBA=new Audio("https://dl.dropboxusercontent.com/s/xdnpynq643ziq9o/inba.ogg");IMBA.volume=.6,IMBA.play();var BGCHANGE=0,inbix=setInterval(function(){$("body").css("background-image","none"),BGCHANGE++,BGCHANGE%2===0?$("body").css("background-color","red"):$("body").css("background-color","blue")},200);setTimeout(function(){BGCHANGE=0,clearInterval(inbix),$("body").css({"background-image":"","background-color":""}),$yoba.remove()},12e3);var smilesArray=window.CHANNEL.emotes.map(function(smile){return smile.name});return smilesArray[Math.floor(Math.random()*smilesArray.length)]+" "}}};var IS_COMMAND=!1;this.prepareMessage=function(msg){IS_COMMAND=!1;for(var command in this.commandsList)if(this.commandsList.hasOwnProperty(command)&&0===msg.indexOf(command)){isCommandPermitted(command)&&(this.commandsList[command].isAvailable?this.commandsList[command].isAvailable():!0)&&(IS_COMMAND=!0,msg=this.commandsList[command].value(msg));break}return msg},this.sendUserChatMessage=function(e){if(13!==e.keyCode)return 9===e.keyCode?(window.chatTabComplete(),e.preventDefault(),!1):38===e.keyCode?(window.CHATHISTIDX===window.CHATHIST.length&&window.CHATHIST.push($("#chatline").val()),window.CHATHISTIDX>0&&(window.CHATHISTIDX--,$("#chatline").val(window.CHATHIST[window.CHATHISTIDX])),e.preventDefault(),!1):40===e.keyCode?(window.CHATHISTIDX<window.CHATHIST.length-1&&(window.CHATHISTIDX++,$("#chatline").val(window.CHATHIST[window.CHATHISTIDX])),e.preventDefault(),!1):void 0;if(!window.CHATTHROTTLE){var msg=$("#chatline").val().trim();if(""!==msg){var meta={};window.USEROPTS.adminhat&&window.CLIENT.rank>=255?msg="/a "+msg:window.USEROPTS.modhat&&window.CLIENT.rank>=window.Rank.Moderator&&(meta.modflair=window.CLIENT.rank),window.CLIENT.rank>=2&&0===msg.indexOf("/m ")&&(meta.modflair=window.CLIENT.rank,msg=msg.substring(3));var msgForCommand=this.prepareMessage(msg);IS_COMMAND?(window.socket.emit("chatMsg",{msg:msg,meta:meta}),window.socket.emit("chatMsg",{msg:"Сырно: "+msgForCommand}),IS_COMMAND=!1):window.socket.emit("chatMsg",{msg:msg,meta:meta}),window.CHATHIST.push($("#chatline").val()),window.CHATHISTIDX=window.CHATHIST.length,$("#chatline").val("")}}},$("#chatline, #chatbtn").off(),$("#chatline").on("keydown",function(e){that.sendUserChatMessage(e)}),$("#chatbtn").on("click",function(e){that.sendUserChatMessage(e)})})},{}],7:[function(require,module,exports){require("jquery.selection"),window.cytubeEnhanced.addModule("bbCodesHelper",function(app,settings){"use strict";var that=this,defaultSettings={templateButtonsOrder:["b","i","sp","code","s"],templateButtonsAnimationSpeed:150};settings=$.extend({},defaultSettings,settings),0===$("#chat-controls").length&&$('<div id="chat-controls" class="btn-group">').appendTo("#chatwrap"),this.handleMarkdownHelperBtnClick=function($markdownHelperBtn,$markdownTemplatesWrapper){$markdownHelperBtn.hasClass("btn-default")?($markdownHelperBtn.removeClass("btn-default"),$markdownHelperBtn.addClass("btn-success"),$markdownTemplatesWrapper.show(),$markdownTemplatesWrapper.children().animate({left:0},settings.templateButtonsAnimationSpeed)):($markdownHelperBtn.removeClass("btn-success"),$markdownHelperBtn.addClass("btn-default"),$markdownTemplatesWrapper.children().animate({left:-$markdownTemplatesWrapper.width()},settings.templateButtonsAnimationSpeed,function(){$markdownTemplatesWrapper.hide()}))},this.$markdownHelperBtn=$('<button id="markdown-helper-btn" type="button" class="btn btn-sm btn-default" title="'+app.t("markdown[.]Markdown helper")+'">').html('<i class="glyphicon glyphicon-font"></i>').on("click",function(){that.handleMarkdownHelperBtnClick($(this),that.$markdownTemplatesWrapper),app.userConfig.toggle("bb-codes-opened")}),0!==$("#chat-help-btn").length?this.$markdownHelperBtn.insertBefore("#chat-help-btn"):this.$markdownHelperBtn.appendTo("#chat-controls"),this.$markdownTemplatesWrapper=$('<div class="btn-group markdown-helper-templates-wrapper">').insertAfter(this.$markdownHelperBtn).hide(),app.userConfig.get("bb-codes-opened")&&this.handleMarkdownHelperBtnClick(this.$markdownHelperBtn,this.$markdownTemplatesWrapper),this.markdownTemplates={b:{text:"<b>B</b>",title:app.t("markdown[.]Bold text")},i:{text:"<i>I</i>",title:app.t("markdown[.]Cursive text")},sp:{text:"SP",title:app.t("markdown[.]Spoiler")},code:{text:"<code>CODE</code>",title:app.t("markdown[.]Monospace")},s:{text:"<s>S</s>",title:app.t("markdown[.]Strike")}};for(var template,templateIndex=0,templatesLength=settings.templateButtonsOrder.length;templatesLength>templateIndex;templateIndex++)template=settings.templateButtonsOrder[templateIndex],$('<button type="button" class="btn btn-sm btn-default" title="'+this.markdownTemplates[template].title+'">').html(this.markdownTemplates[template].text).data("template",template).appendTo(this.$markdownTemplatesWrapper);this.handleMarkdown=function(templateType){this.markdownTemplates.hasOwnProperty(templateType)&&($("#chatline").selection("insert",{text:"["+templateType+"]",mode:"before"}),$("#chatline").selection("insert",{text:"[/"+templateType+"]",mode:"after"}))},this.$markdownTemplatesWrapper.on("click","button",function(){return that.handleMarkdown($(this).data("template")),!1})})},{"jquery.selection":2}],8:[function(require,module,exports){window.cytubeEnhanced.addModule("chatCommandsHelp",function(app){"use strict";var that=this;0===$("#chat-controls").length&&$('<div id="chat-controls" class="btn-group">').appendTo("#chatwrap"),this.commands={},this.commands[app.t("Standard commands")]={"/me":app.t("chatCommands[.]%username% action (e.g: <i>/me is dancing</i>)"),"/sp":app.t("chatCommands[.]spoiler"),"/afk":app.t('chatCommands[.]sets the "AFK" status')},app.isModulePermitted("additionalChatCommands")&&app.getModule("additionalChatCommands").done(function(commandsModule){var additionalCommands={};for(var command in commandsModule.commandsList)commandsModule.commandsList.hasOwnProperty(command)&&(commandsModule.commandsList[command].isAvailable?commandsModule.commandsList[command].isAvailable():!0)&&(additionalCommands[command]=commandsModule.commandsList[command].description||"");that.commands[app.t("Extra commands")]=additionalCommands}),this.handleChatHelpBtn=function(commands){var $bodyWrapper=$("<div>");for(var commandsPart in commands)if(commands.hasOwnProperty(commandsPart)){$("<h3>").html(commandsPart).appendTo($bodyWrapper);var $ul=$("<ul>");for(var command in commands[commandsPart])commands[commandsPart].hasOwnProperty(command)&&$("<li>").html("<code>"+command+"</code> - "+commands[commandsPart][command]+".").appendTo($ul);$ul.appendTo($bodyWrapper)}app.getModule("utils").done(function(utilsModule){utilsModule.createModalWindow(app.t("The list of chat commands"),$bodyWrapper)})},this.$chatHelpBtn=$('<button id="chat-help-btn" class="btn btn-sm btn-default">').text(app.t("Commands list")).appendTo("#chat-controls").on("click",function(){that.handleChatHelpBtn(that.commands)})})},{}],9:[function(require,module,exports){window.cytubeEnhanced.addModule("chatControls",function(app,settings){"use strict";var that=this,defaultSettings={afkButton:!0,clearChatButton:!0};settings=$.extend({},defaultSettings,settings),this.handleAfkBtn=function(){window.socket.emit("chatMsg",{msg:"/afk"})},this.$afkBtn=$('<span id="afk-btn" class="label label-default pull-right pointer">').text(app.t("AFK")).appendTo("#chatheader").on("click",function(){that.handleAfkBtn()}),this.handleAfk=function(data){data.name===window.CLIENT.name&&(data.afk?(that.$afkBtn.removeClass("label-default"),that.$afkBtn.addClass("label-success")):(that.$afkBtn.addClass("label-default"),that.$afkBtn.removeClass("label-success")))},settings.afkButton?window.socket.on("setAFK",function(data){that.handleAfk(data)}):this.$afkBtn.hide(),this.handleClearBtn=function(){window.confirm(app.t("Are you sure, that you want to clear the chat?"))&&window.socket.emit("chatMsg",{msg:"/clear"})},this.$clearChatBtn=$('<span id="clear-chat-btn" class="label label-default pull-right pointer">').text(app.t("Clear chat")).insertAfter(this.$afkBtn).on("click",function(){that.handleClearBtn()}),window.hasPermission("chatclear")||this.$clearChatBtn.hide(),this.handleChatClear=function(){window.hasPermission("chatclear")&&settings.clearChatButton?that.$clearChatBtn.show():that.$clearChatBtn.hide()},window.socket.on("setUserRank",function(){that.handleChatClear()})})},{}],10:[function(require,module,exports){window.cytubeEnhanced.addModule("favouritePictures",function(app){"use strict";var that=this;0===$("#chat-panel").length&&$('<div id="chat-panel" class="row">').insertAfter("#main"),0===$("#chat-controls").length&&$('<div id="chat-controls" class="btn-group">').appendTo("#chatwrap"),this.$toggleFavouritePicturesPanelBtn=$('<button id="favourite-pictures-btn" class="btn btn-sm btn-default" title="'+app.t("favPics[.]Show your favorite images")+'">').html('<i class="glyphicon glyphicon-th"></i>'),0!==$("#smiles-btn").length?this.$toggleFavouritePicturesPanelBtn.insertAfter("#smiles-btn"):this.$toggleFavouritePicturesPanelBtn.prependTo("#chat-controls"),this.$favouritePicturesPanel=$('<div id="favourite-pictures-panel">').appendTo("#chat-panel").hide(),this.$favouritePicturesBodyPanel=$('<div id="pictures-body-panel" class="row">').appendTo(this.$favouritePicturesPanel),this.$favouritePicturesControlPanel=$('<div id="pictures-control-panel" class="row">').appendTo(this.$favouritePicturesPanel),this.$favouritePicturesControlPanelForm=$('<div class="col-md-12">').html('<div class="input-group"><span class="input-group-btn"><button id="export-pictures" class="btn btn-sm btn-default" style="border-radius: 0;" type="button">'+app.t("favPics[.]Export pictures")+'</button></span><span class="input-group-btn"><label for="import-pictures" class="btn btn-sm btn-default" style="border-radius: 0;">'+app.t("favPics[.]Import pictures")+'</label><input type="file" style="display: none" id="import-pictures" name="pictures-import"></span><input type="text" id="picture-address" class="form-control input-sm" placeholder="'+app.t("favPics[.]Picture address")+'"><span class="input-group-btn"><button id="add-picture-btn" class="btn btn-sm btn-default" style="border-radius: 0;" type="button">'+app.t("favPics[.]Add")+'</button></span><span class="input-group-btn"><button id="remove-picture-btn" class="btn btn-sm btn-default" type="button">'+app.t("favPics[.]Remove")+"</button></span></div>").appendTo(this.$favouritePicturesControlPanel),this.entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},this.replaceUnsafeSymbol=function(symbol){return that.entityMap[symbol]},this.renderFavouritePictures=function(){var favouritePictures=JSON.parse(window.localStorage.getItem("favouritePictures"))||[];this.$favouritePicturesBodyPanel.empty();for(var n=0,favouritePicturesLen=favouritePictures.length;favouritePicturesLen>n;n++){var escapedAddress=favouritePictures[n].replace(/[&<>"']/g,this.replaceUnsafeSymbol);$('<img class="favourite-picture-on-panel">').attr({src:escapedAddress}).appendTo(this.$favouritePicturesBodyPanel)}},this.insertFavouritePicture=function(address){app.getModule("utils").done(function(utilsModule){utilsModule.addMessageToChatInput(" "+address+" ","end")})},$(document.body).on("click",".favourite-picture-on-panel",function(){that.insertFavouritePicture($(this).attr("src"))}),this.handleFavouritePicturesPanel=function($toggleFavouritePicturesPanelBtn){var smilesAndPicturesTogether=this.smilesAndPicturesTogether||!1;0===$("#smiles-panel").length||smilesAndPicturesTogether||$("#smiles-panel").hide(),this.$favouritePicturesPanel.toggle(),smilesAndPicturesTogether||($toggleFavouritePicturesPanelBtn.hasClass("btn-default")?(0!==$("#smiles-btn").length&&$("#smiles-btn").hasClass("btn-success")&&($("#smiles-btn").removeClass("btn-success"),$("#smiles-btn").addClass("btn-default")),$toggleFavouritePicturesPanelBtn.removeClass("btn-default"),$toggleFavouritePicturesPanelBtn.addClass("btn-success")):($toggleFavouritePicturesPanelBtn.removeClass("btn-success"),$toggleFavouritePicturesPanelBtn.addClass("btn-default")))},this.$toggleFavouritePicturesPanelBtn.on("click",function(){that.handleFavouritePicturesPanel($(this))}),this.addFavouritePicture=function(){var imageUrl=trim($("#picture-address").val());if(""!==imageUrl){var favouritePictures=JSON.parse(window.localStorage.getItem("favouritePictures"))||[];if(-1!==favouritePictures.indexOf(imageUrl))return window.makeAlert(app.t("favPics[.]The image already exists")).prependTo(this.$favouritePicturesBodyPanel),$("#picture-address").val(""),!1;""!==imageUrl&&favouritePictures.push(imageUrl),$("#picture-address").val(""),window.localStorage.setItem("favouritePictures",JSON.stringify(favouritePictures)),this.renderFavouritePictures()}},$("#add-picture-btn").on("click",function(){that.addFavouritePicture()}),this.removeFavouritePicture=function(){var favouritePictures=JSON.parse(window.localStorage.getItem("favouritePictures"))||[],removePosition=favouritePictures.indexOf($("#picture-address").val());-1!==removePosition&&(favouritePictures.splice(removePosition,1),window.localStorage.setItem("favouritePictures",JSON.stringify(favouritePictures)),this.renderFavouritePictures()),$("#picture-address").val("")},$("#remove-picture-btn").on("click",function(){that.removeFavouritePicture()}),this.exportPictures=function(){var $downloadLink=$("<a>").attr({href:"data:text/plain;charset=utf-8,"+encodeURIComponent(window.localStorage.getItem("favouritePictures")||JSON.stringify([])),download:"cytube_enhanced_favourite_images.txt"}).hide().appendTo($(document.body));$downloadLink[0].click(),$downloadLink.remove()},$("#export-pictures").on("click",function(){that.exportPictures()}),this.importPictures=function(importFile){var favouritePicturesAddressesReader=new FileReader;favouritePicturesAddressesReader.addEventListener("load",function(e){window.localStorage.setItem("favouritePictures",e.target.result),that.renderFavouritePictures()}),favouritePicturesAddressesReader.readAsText(importFile)},$("#import-pictures").on("change",function(){that.importPictures($(this)[0].files[0])}),this.renderFavouritePictures()})},{}],11:[function(require,module,exports){require("jquery-mousewheel")($),window.cytubeEnhanced.addModule("imagePreview",function(app,settings){"use strict";var that=this,defaultSettings={selectorsToPreview:".chat-picture",zoom:.15};settings=$.extend({},defaultSettings,settings),this.showPicturePreview=function(pictureToPreview){if($(pictureToPreview).is(settings.selectorsToPreview)){var $picture=$('<img src="'+$(pictureToPreview).attr("src")+'">');$picture.ready(function(){$('<div id="modal-picture-overlay">').appendTo($(document.body));var $modalPicture=$('<div id="modal-picture">').appendTo($(document.body)).draggable(),pictureWidth=$picture.prop("width"),pictureHeight=$picture.prop("height"),$modalPictureOptions=$('<div id="modal-picture-options">');$modalPicture.append($('<div id="modal-picture-options-wrapper">').append($modalPictureOptions)),$('<a href="'+$picture.prop("src")+'" target="_blank" class="btn btn-sm btn-default" style="width:40px;"><i class="glyphicon glyphicon-eye-open"></i></button>').appendTo($modalPictureOptions),$('<a href="https://www.google.com/searchbyimage?image_url='+$picture.prop("src")+'" target="_blank" class="btn btn-sm btn-default" style="width:40px;"><i class="glyphicon glyphicon-search"></i></button>').appendTo($modalPictureOptions);var scaleFactor=1;pictureWidth>document.documentElement.clientWidth&&pictureHeight>document.documentElement.clientHeight?scaleFactor=pictureHeight-document.documentElement.clientHeight>pictureWidth-document.documentElement.clientWidth?pictureHeight/(.8*document.documentElement.clientHeight):pictureWidth/(.8*document.documentElement.clientWidth):pictureHeight>document.documentElement.clientHeight?scaleFactor=pictureHeight/(.8*document.documentElement.clientHeight):pictureWidth>document.documentElement.clientWidth&&(scaleFactor=pictureWidth/(.8*document.documentElement.clientWidth)),pictureHeight/=scaleFactor,pictureWidth/=scaleFactor,$modalPicture.css({width:pictureWidth,height:pictureHeight,marginLeft:-(pictureWidth/2),marginTop:-(pictureHeight/2)}),$picture.appendTo($modalPicture)})}},$(document.body).on("click",function(event){that.showPicturePreview(event.target)}),this.handleModalPictureMouseWheel=function(e){var pictureWidth=parseInt($("#modal-picture").css("width"),10),pictureHeight=parseInt($("#modal-picture").css("height"),10),pictureMarginLeft=parseInt($("#modal-picture").css("marginLeft"),10),pictureMarginTop=parseInt($("#modal-picture").css("marginTop"),10);e.deltaY>0?$("#modal-picture").css({width:pictureWidth*(1+settings.zoom),height:pictureHeight*(1+settings.zoom),marginLeft:pictureMarginLeft+-pictureWidth*settings.zoom/2,marginTop:pictureMarginTop+-pictureHeight*settings.zoom/2}):$("#modal-picture").css({width:pictureWidth*(1-settings.zoom),height:pictureHeight*(1-settings.zoom),marginLeft:pictureMarginLeft+pictureWidth*settings.zoom/2,marginTop:pictureMarginTop+pictureHeight*settings.zoom/2})},$(document.body).on("mousewheel","#modal-picture",function(e){return that.handleModalPictureMouseWheel(e),!1}),this.closePictureByClick=function(){$("#modal-picture-overlay").remove(),$("#modal-picture").remove()},$(document.body).on("click","#modal-picture-overlay, #modal-picture",function(){that.closePictureByClick()}),this.closePictureByEscape=function(e){27===e.which&&0!==$("#modal-picture").length&&($("#modal-picture-overlay").remove(),$("#modal-picture").remove())},$(document.body).on("keydown",function(e){that.closePictureByEscape(e)})})},{"jquery-mousewheel":1}],12:[function(require,module,exports){window.cytubeEnhanced.addModule("navMenuTabs",function(app){"use strict";var that=this;this.addTabInput=function($tabsArea,tabName,tabValue){tabName=tabName||"",tabValue=tabValue||"";var $wrapper=$('<div class="row tab-option-wrapper">').appendTo($tabsArea),$tabNameWrapperOfWrapper=$('<div class="col-sm-4 col-md-3">').appendTo($wrapper),$tabNameWrapper=$('<div class="form-group">').appendTo($tabNameWrapperOfWrapper);$('<input name="title" type="text" class="form-control" placeholder="'+app.t("tabs[.]Title")+'">').val(tabName).appendTo($tabNameWrapper);var $tabValueWrapperOfWrapper=$('<div class="col-sm-8 col-md-9">').appendTo($wrapper),$tabValueWrapper=$('<div class="form-group">').appendTo($tabValueWrapperOfWrapper);$('<input name="content" type="text" class="form-control" placeholder="'+app.t("tabs[.]Content")+'">').val(tabValue).appendTo($tabValueWrapper)},this.tabsConfigToHtml=function(channelDescription,tabsConfig){var $virtualMainWrapper=$("<div>");if(void 0!==channelDescription&&""!==channelDescription&&$('<div id="motd-channel-description">').html(channelDescription).appendTo($virtualMainWrapper),0!==tabsConfig.length)for(var TAB_TITLE=0,TAB_CONTENT=1,LINK_TITLE=0,LINK_ADDRESS=1,$tabsWrapper=$('<div id="motd-tabs-wrapper">').appendTo($virtualMainWrapper),$tabs=$('<div id="motd-tabs">').appendTo($tabsWrapper),$tabsContent=$('<div id="motd-tabs-content">').appendTo($tabsWrapper),tabIndex=0,tabsLength=tabsConfig.length;tabsLength>tabIndex;tabIndex++)if(0===tabsConfig[tabIndex][TAB_TITLE].indexOf("!dropdown!")){var $dropdownWrapper=$('<div class="btn-group">');$('<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">').html(tabsConfig[tabIndex][TAB_TITLE].replace("!dropdown!","")+' <span class="caret"></span>').appendTo($dropdownWrapper);for(var $dropdownMenu=$('<ul class="dropdown-menu">').appendTo($dropdownWrapper),linksConfig=tabsConfig[tabIndex][TAB_CONTENT],linkIndex=0,linksLength=tabsConfig[tabIndex][TAB_CONTENT].length;linksLength>linkIndex;linkIndex++){var $link=$("<a>").attr({href:linksConfig[linkIndex][LINK_ADDRESS],target:"_blank"}).text(linksConfig[linkIndex][LINK_TITLE]);$("<li>").html($link).appendTo($dropdownMenu)}$dropdownWrapper.appendTo($tabs)}else $('<button class="btn btn-default motd-tab-btn" data-tab-index="'+tabIndex+'">').html(tabsConfig[tabIndex][TAB_TITLE]).appendTo($tabs),$('<div class="motd-tab-content" data-tab-index="'+tabIndex+'">').hide().html(tabsConfig[tabIndex][TAB_CONTENT]).appendTo($tabsContent);return $virtualMainWrapper.html()},this.tabsHtmlToCondig=function(htmlCode){this.$tabsArea.empty();var $tabsTree=$("<div>").html(htmlCode),$tabsTreeNavBtns=$tabsTree.find("#motd-tabs").children(),$tabsTreeTabsContent=$tabsTree.find("#motd-tabs-content");$("#channel-description-input").val($tabsTree.find("#motd-channel-description").html()),$tabsTreeNavBtns.each(function(){if($(this).hasClass("btn-group")){var parsedDropdownItems="",$dropdownItems=$(this).children("ul").children();$dropdownItems.each(function(){var link=$(this).children("a");parsedDropdownItems+="[n]"+link.text()+"[/n][a]"+link.attr("href")+"[/a], "}),parsedDropdownItems=parsedDropdownItems.slice(0,-2),that.addTabInput(that.$tabsArea,"!dropdown!"+$(this).children("button").html().replace(' <span class="caret"></span>',""),parsedDropdownItems)}else that.addTabInput(that.$tabsArea,$(this).html(),$tabsTreeTabsContent.find('[data-tab-index="'+$(this).data("tabIndex")+'"]').html())})},this.motdCutMap={"<iframe $1>$2</iframe>":/\[iframe(.*?)\](.*?)[\/iframe]]/g},this.fixMotdCut=function(){$("#motd-tabs-content").find(".motd-tab-content").each(function(){for(var tag in that.motdCutMap)that.motdCutMap.hasOwnProperty(tag)&&$(this).html($(this).html().replace(that.motdCutMap[tag],tag))})},this.$tabSettingsBtn=$('<button type="button" class="btn btn-primary motd-bottom-btn" id="show-tabs-settings">').text(app.t("tabs[.]Show tabs settings (cytube enhanced)")).appendTo("#cs-motdeditor").on("click",function(){$(this).hasClass("btn-primary")?(that.$tabsSettings.show(),$(this).removeClass("btn-primary"),$(this).addClass("btn-success")):(that.$tabsSettings.hide(),$(this).removeClass("btn-success"),$(this).addClass("btn-primary"))}),this.$tabsSettings=$('<div id="tabs-settings">').html("<hr><h3>"+app.t("tabs[.]Tabs settings")+"</h3>").insertBefore("#cs-motdtext").hide(),$("#cs-motdtext").before("<hr>"),this.$channelDescriptionInputWrapper=$('<div class="form-group">').appendTo(this.$tabsSettings),this.$channelDescriptionLabel=$('<label for="channel-description-input">'+app.t("tabs[.]Channel description")+"</label>").appendTo(this.$channelDescriptionInputWrapper),this.$channelDescriptionInput=$('<input id="channel-description-input" placeholder="'+app.t("tabs[.]Channel description")+'" class="form-control">').appendTo(this.$channelDescriptionInputWrapper),this.$tabsArea=$('<div id="tabs-settings-area">').appendTo(this.$tabsSettings),$("<p>Вкладки</p>").insertBefore(this.$tabsArea),this.$addTabToTabsSettingsBtn=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-add">').text(app.t("tabs[.]Add tab")).appendTo(this.$tabsSettings).on("click",function(){that.addTabInput(that.$tabsArea)}),this.$removeLastTabFromTabsSettingsBtn=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-remove">').text(app.t("tabs[.]Remove the last tab")).appendTo(this.$tabsSettings).on("click",function(){that.$tabsArea.children(".tab-option-wrapper").last().remove()}),this.$tabsToHtml=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-to-html">').text(app.t("tabs[.]Convert to the editor's code")).appendTo(this.$tabsSettings).on("click",function(){if(window.confirm(app.t("tabs[.]The code in the editor will be replaced with the new code, continue?"))){var tabsConfig=[];that.$tabsArea.find(".tab-option-wrapper").each(function(){var tabName=$(this).find('input[name="title"]').val().trim(),tabContent=$(this).find('input[name="content"]').val().trim();if(0===tabName.indexOf("!dropdown!")){if(!/^(?:\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\][ ]*,[ ]*)*\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\]$/.test(tabContent))return void window.alert(app.t("tabs[.]Wrong content for the dropdown")+tabName.replace("!dropdown!","")+".");tabContent=tabContent.split(",").map(function(linkInfo){return linkInfo=linkInfo.trim().match(/^\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\]$/),[linkInfo[1].trim(),linkInfo[2].trim()]})}tabsConfig.push([tabName,tabContent])}),$("#cs-motdtext").val(that.tabsConfigToHtml(that.$channelDescriptionInput.val(),tabsConfig))}}),this.$htmlToTabs=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-from-html">').text(app.t("tabs[.]Convert from the editor's code")).appendTo(this.$tabsSettings).on("click",function(){
that.tabsHtmlToCondig($("#cs-motdtext").val())}),this.showMotdTab=function($tabBtn){var $tabContent=$("#motd-tabs-content").find('[data-tab-index="'+$tabBtn.data("tabIndex")+'"]');$tabBtn.hasClass("btn-default")?($(".motd-tab-content").hide(),$tabContent.show(),$(".motd-tab-btn").removeClass("btn-success"),$(".motd-tab-btn").addClass("btn-default"),$tabBtn.removeClass("btn-default"),$tabBtn.addClass("btn-success")):($tabContent.hide(),$tabBtn.removeClass("btn-success"),$tabBtn.addClass("btn-default"))},$(document.body).on("click","#motd-tabs .motd-tab-btn",function(){that.showMotdTab($(this))}),this.motdHandleDropdown=function(){$(".motd-tab-btn").removeClass("btn-success"),$(".motd-tab-btn").addClass("btn-default"),$(".motd-tab-content").hide()},$(document.body).on("click","#motd-tabs .dropdown-toggle",function(){that.motdHandleDropdown()}),this.tabsHtmlToCondig($("#cs-motdtext").val()),this.fixMotdCut(),window.socket.on("setMotd",function(){that.fixMotdCut()})})},{}],13:[function(require,module,exports){window.cytubeEnhanced.addModule("showVideoInfo",function(app){"use strict";var that=this;this.$titleRow=$('<div id="titlerow" class="row">').insertBefore("#main"),this.$titleRowOuter=$('<div id="titlerow-outer" class="col-md-12" />').html($("#currenttitle").text(""!==$(".queue_active a").text()?$("#currenttitle").text().replace(/^Currently Playing:/,app.t("videoInfo[.]Now:")):"").detach()).appendTo(this.$titleRow),this.$mediaInfo=$('<p id="mediainfo">').prependTo("#videowrap"),this.showPlaylistInfo=function(){0!==$(".queue_active").length?($("#currenttitle").text($("#currenttitle").text().replace(/^Currently Playing:/,app.t("videoInfo[.]Now:"))),this.$mediaInfo.text($(".queue_active").attr("title").replace("Added by",app.t("videoInfo[.]Added by")))):($("#currenttitle").text(""),this.$mediaInfo.text(app.t("videoInfo[.]Nothing is playing now")))},this.showPlaylistInfo(),window.socket.on("changeMedia",function(){that.showPlaylistInfo()})})},{}],14:[function(require,module,exports){window.cytubeEnhanced.addModule("smiles",function(app){"use strict";var that=this;0===$("#chat-panel").length&&$('<div id="chat-panel" class="row">').insertAfter("#main"),0===$("#chat-controls").length&&$('<div id="chat-controls" class="btn-group">').appendTo("#chatwrap"),$("#emotelistbtn").hide(),this.$smilesBtn=$('<button id="smiles-btn" class="btn btn-sm btn-default" title="'+app.t("emotes[.]Show emotes")+'">').html('<i class="glyphicon glyphicon-picture"></i>').prependTo("#chat-controls"),this.$smilesPanel=$('<div id="smiles-panel">').prependTo("#chat-panel").hide(),this.renderSmiles=function(){for(var smiles=window.CHANNEL.emotes,smileIndex=0,smilesLen=smiles.length;smilesLen>smileIndex;smileIndex++)$('<img class="smile-on-panel">').attr({src:smiles[smileIndex].image}).data("name",smiles[smileIndex].name).appendTo(this.$smilesPanel)},this.insertSmile=function(smileName){app.getModule("utils").done(function(utilsModule){utilsModule.addMessageToChatInput(" "+smileName+" ","end")})},$(document.body).on("click",".smile-on-panel",function(){that.insertSmile($(this).data("name"))}),this.handleSmileBtn=function($smilesBtn){var smilesAndPicturesTogether=this.smilesAndPicturesTogether||!1;0===$("#favourite-pictures-panel").length||smilesAndPicturesTogether||$("#favourite-pictures-panel").hide(),this.$smilesPanel.toggle(),smilesAndPicturesTogether||($smilesBtn.hasClass("btn-default")?(0!==$("#favourite-pictures-btn").length&&$("#favourite-pictures-btn").hasClass("btn-success")&&($("#favourite-pictures-btn").removeClass("btn-success"),$("#favourite-pictures-btn").addClass("btn-default")),$smilesBtn.removeClass("btn-default"),$smilesBtn.addClass("btn-success")):($smilesBtn.removeClass("btn-success"),$smilesBtn.addClass("btn-default")))},this.$smilesBtn.on("click",function(){that.handleSmileBtn($(this))}),this.renderSmiles()})},{}],15:[function(require,module,exports){window.cytubeEnhanced.addModule("userControlPanel",function(app,settings){"use strict";var that=this,defaultSettings={layoutConfigButton:!0,smilesAndPicturesTogetherButton:!0,minimizeButton:!0};settings=$.extend({},defaultSettings,settings),this.$configWrapper=$('<div id="config-wrapper" class="col-lg-12 col-md-12">').appendTo("#leftpane-inner"),app.userConfig.get("hide-config-panel")||this.$configWrapper.show(),this.$configBody=$('<div id="config-body" class="well form-horizontal">').appendTo(this.$configWrapper),this.handleConfigBtn=function(){app.userConfig.toggle("hide-config-panel"),this.$configWrapper.toggle()},this.$configBtn=$('<button id="layout-btn" class="btn btn-sm btn-default pull-right">').html('<span class="glyphicon glyphicon-cog"></span> '+app.t("userConfig[.]Settings")).appendTo("#leftcontrols").on("click",function(){that.handleConfigBtn()}),this.$layoutForm=$('<div id="layout-config-form" class="form-group">').appendTo(this.$configBody).append($('<div class="col-lg-3 col-md-3 control-label">'+app.t("userConfig[.]Layout")+"</div>")),this.$layoutWrapper=$('<div id="layout-config-wrapper" class="col-lg-9 col-md-9 text-center">').appendTo(this.$layoutForm),this.$layoutBtnWrapper=$('<div id="layout-config-btn-wrapper" class="btn-group">').appendTo(this.$layoutWrapper),settings.layoutConfigButton||settings.minimizeButton||this.$layoutForm.hide(),this.layoutOptions={"hide-header":{title:app.t("userConfig[.]Hide header"),"default":"no",values:{yes:app.t("userConfig[.]Yes"),no:app.t("userConfig[.]No")}},"player-position":{title:app.t("userConfig[.]Player position"),"default":"right",values:{left:app.t("userConfig[.]Left"),right:app.t("userConfig[.]Right"),center:app.t("userConfig[.]Center")}},"playlist-position":{title:app.t("userConfig[.]Playlist position"),"default":"right",values:{left:app.t("userConfig[.]Left"),right:app.t("userConfig[.]Right")}},"userlist-position":{title:app.t("userConfig[.]Chat's userlist position"),"default":"left",values:{left:app.t("userConfig[.]Left"),right:app.t("userConfig[.]Right")}}},this.configUserLayout=function(layoutValues){var $settingsWrapper=$('<div class="form-horizontal">');for(var layoutOption in this.layoutOptions)if(this.layoutOptions.hasOwnProperty(layoutOption)){var $formGroup=$('<div class="form-group">').appendTo($settingsWrapper);$('<label for="'+layoutOption+'" class="col-sm-2 control-label">'+this.layoutOptions[layoutOption].title+"</label>").appendTo($formGroup);var $selectWrapper=$('<div class="col-sm-10">').appendTo($formGroup),$select=$('<select id="'+layoutOption+'" class="form-control">').appendTo($selectWrapper);for(var selectOption in this.layoutOptions[layoutOption].values)this.layoutOptions[layoutOption].values.hasOwnProperty(selectOption)&&$('<option value="'+selectOption+'">'+this.layoutOptions[layoutOption].values[selectOption]+"</option>").appendTo($select);layoutValues.hasOwnProperty(layoutOption)?$select.val(layoutValues[layoutOption]):$select.val(this.layoutOptions[layoutOption]["default"])}var $userCssWrapper=$('<div class="form-group">').appendTo($settingsWrapper);$('<label for="user-css" class="col-sm-2 control-label">'+app.t("userConfig[.]User CSS")+"</label>").appendTo($userCssWrapper);var $userCssTextareaWrapper=$('<div class="col-sm-10">').appendTo($userCssWrapper);$('<textarea id="user-css" class="form-control" rows="7">').appendTo($userCssTextareaWrapper).val(layoutValues["user-css"]||"");var $btnWrapper=$("<div>");$('<button type="button" id="cancel-user-layout" class="btn btn-info" data-dismiss="modal">'+app.t("userConfig[.]Cancel")+"</button>").appendTo($btnWrapper),$('<button type="button" id="reset-user-layout" class="btn btn-danger">'+app.t("userConfig[.]Reset settings")+"</button>").appendTo($btnWrapper).on("click",function(){if(window.confirm(app.t("userConfig[.]All the settings including user css will be reset, continue?"))){for(var layoutOption in that.layoutOptions)that.layoutOptions.hasOwnProperty(layoutOption)&&(layoutValues[layoutOption]=that.layoutOptions[layoutOption]["default"]);layoutValues["user-css"]="",app.userConfig.set("layout",JSON.stringify(layoutValues)),that.applyLayoutSettings(layoutValues),$modalWindow.modal("hide")}}),$('<button type="button" id="save-user-layout" class="btn btn-success">').text(app.t("userConfig[.]Save")).appendTo($btnWrapper).on("click",function(){for(var layoutOption in that.layoutOptions)that.layoutOptions.hasOwnProperty(layoutOption)&&(0!==$("#"+layoutOption).length?layoutValues[layoutOption]=$("#"+layoutOption).val():layoutValues[layoutOption]=that.layoutOptions[layoutOption]["default"]);0!==$("#user-css").length?layoutValues["user-css"]=$("#user-css").val():layoutValues["user-css"]="",app.userConfig.set("layout",JSON.stringify(layoutValues)),that.applyLayoutSettings(layoutValues),$modalWindow.modal("hide")});var $modalWindow;app.getModule("utils").done(function(utilsModule){$modalWindow=utilsModule.createModalWindow(app.t("userConfig[.]Layout settings"),$settingsWrapper,$btnWrapper)})},this.applyLayoutSettings=function(layoutValues){"yes"===layoutValues["hide-header"]?($("#motdrow").hide(),$("#motdrow").data("hiddenByLayout","1")):("1"!==$("#motdrow").data("hiddenByMinimize")&&$("#motdrow").show(),$("#motdrow").data("hiddenByLayout","0")),"left"===layoutValues["player-position"]?($("#chatwrap").hasClass("col-md-10 col-md-offset-1")&&($("#chatwrap").removeClass("col-md-10 col-md-offset-1"),$("#chatwrap").addClass("col-lg-5 col-md-5")),$("#videowrap").hasClass("col-md-10 col-md-offset-1")&&($("#videowrap").removeClass("col-md-10 col-md-offset-1"),$("#videowrap").addClass("col-lg-7 col-md-7")),$("#videowrap").detach().insertBefore($("#chatwrap"))):"center"===layoutValues["player-position"]?($("#chatwrap").removeClass(function(index,css){return(css.match(/(\s)*col-(\S)+/g)||[]).join("")}),$("#videowrap").removeClass(function(index,css){return(css.match(/(\s)*col-(\S)+/g)||[]).join("")}),$("#chatwrap").addClass("col-md-10 col-md-offset-1"),$("#videowrap").addClass("col-md-10 col-md-offset-1"),$("#videowrap").detach().insertBefore($("#chatwrap"))):($("#chatwrap").hasClass("col-md-10 col-md-offset-1")&&($("#chatwrap").removeClass("col-md-10 col-md-offset-1"),$("#chatwrap").addClass("col-lg-5 col-md-5")),$("#videowrap").hasClass("col-md-10 col-md-offset-1")&&($("#videowrap").removeClass("col-md-10 col-md-offset-1"),$("#videowrap").addClass("col-lg-7 col-md-7")),$("#chatwrap").detach().insertBefore($("#videowrap"))),"left"===layoutValues["playlist-position"]?($("#rightcontrols").detach().insertBefore($("#leftcontrols")),$("#rightpane").detach().insertBefore($("#leftpane"))):($("#leftcontrols").detach().insertBefore($("#rightcontrols")),$("#leftpane").detach().insertBefore($("#rightpane"))),"right"===layoutValues["userlist-position"]?$("#userlist").addClass("pull-right"):$("#userlist").removeClass("pull-right"),layoutValues.hasOwnProperty("user-css")&&""!==layoutValues["user-css"]?$("head").append('<style id="user-style" type="text/css">'+layoutValues["user-css"]+"</style>"):0!==$("#user-style").length&&$("#user-style").remove(),$("#refresh-video").click()},this.handleLayout=function(){var userLayout;try{userLayout=window.JSON.parse(app.userConfig.get("layout"))||{}}catch(e){userLayout={}}this.configUserLayout(userLayout)},this.$layoutConfigBtn=$('<button id="layout-configuration-btn" class="btn btn-default">').text(app.t("userConfig[.]Settings")).appendTo(this.$layoutBtnWrapper).on("click",function(){that.handleLayout()});var userLayout;if(settings.layoutConfigButton){try{userLayout=window.JSON.parse(app.userConfig.get("layout"))||{}}catch(e){userLayout={}}this.applyLayoutSettings(userLayout)}else this.$layoutConfigBtn.hide();this.applyMinimize=function(isMinimized){isMinimized?($("#motdrow").data("hiddenByMinimize","1"),$("#motdrow").hide(),$("#queue").parent().hide(),that.$minBtn.removeClass("btn-default"),that.$minBtn.addClass("btn-success")):("1"!==$("#motdrow").data("hiddenByLayout")&&$("#motdrow").show(),$("#motdrow").data("hiddenByMinimize","0"),$("#queue").parent().show(),that.$minBtn.removeClass("btn-success"),that.$minBtn.addClass("btn-default"))},this.$minBtn=$('<button id="layout-min-btn" class="btn btn-default">').text(app.t("userConfig[.]Minimize")).appendTo(this.$layoutBtnWrapper).on("click",function(){that.applyMinimize(app.userConfig.toggle("isMinimized"))}),settings.minimizeButton?this.applyMinimize(app.userConfig.get("isMinimized")):this.$minBtn.hide(),this.$commonConfigForm=$('<div id="common-config-form" class="form-group">').append($('<div class="col-lg-3 col-md-3 control-label">').text(app.t("userConfig[.]Common"))).appendTo(this.$configBody),this.$commonConfigWrapper=$('<div id="common-config-wrapper" class="col-lg-9 col-md-9 text-center">').appendTo(this.$commonConfigForm),this.$commonConfigBtnWrapper=$('<div id="common-config-btn-wrapper" class="btn-group">').appendTo(this.$commonConfigWrapper),settings.smilesAndPicturesTogetherButton&&app.isModulePermitted("smiles")&&app.isModulePermitted("favouritePictures")||this.$commonConfigForm.hide(),this.applySmilesAndPictures=function(isTurnedOn){app.getModule("smiles").done(function(smilesModule){smilesModule.smilesAndPicturesTogether=isTurnedOn}),app.getModule("favouritePictures").done(function(favouritePicturesModule){favouritePicturesModule.smilesAndPicturesTogether=isTurnedOn}),isTurnedOn?(that.$smilesAndPicturesBtn.removeClass("btn-default"),that.$smilesAndPicturesBtn.addClass("btn-success"),$("#smiles-btn").hide(),$("#smiles-panel").hide(),$("#smiles-btn").addClass("btn-default"),$("#smiles-btn").removeClass("btn-success"),$("#favourite-pictures-btn").hide(),$("#favourite-pictures-panel").hide(),$("#favourite-pictures-btn").addClass("btn-default"),$("#favourite-pictures-btn").removeClass("btn-success"),$('<button id="smiles-and-picture-btn" class="btn btn-sm btn-default" title="'+app.t("userConfig[.]Show emotes and favorite images")+'">').html('<i class="glyphicon glyphicon-picture"></i> и <i class="glyphicon glyphicon-th"></i>').prependTo($("#chat-controls")).on("click",function(){$("#smiles-btn").click(),$("#favourite-pictures-btn").click(),$(this).hasClass("btn-default")?($(this).removeClass("btn-default"),$(this).addClass("btn-success")):($(this).removeClass("btn-success"),$(this).addClass("btn-default"))})):(0!==$("#smiles-and-picture-btn").length&&$("#smiles-and-picture-btn").remove(),that.$smilesAndPicturesBtn.removeClass("btn-success"),that.$smilesAndPicturesBtn.addClass("btn-default"),$("#smiles-btn").show(),$("#favourite-pictures-btn").show(),$("#smiles-panel").hide(),$("#favourite-pictures-panel").hide())},this.$smilesAndPicturesBtn=$('<button id="common-config-smiles-and-pictures-btn" class="btn btn-default">').html('<i class="glyphicon glyphicon-picture"></i> '+app.t("userConfig[.]and")+' <i class="glyphicon glyphicon-th"></i>').appendTo(that.$commonConfigBtnWrapper).on("click",function(){that.applySmilesAndPictures(app.userConfig.toggle("smiles-and-pictures"))}),settings.smilesAndPicturesTogetherButton&&app.isModulePermitted("smiles")&&app.isModulePermitted("favouritePictures")?this.applySmilesAndPictures(app.userConfig.get("smiles-and-pictures")):this.$smilesAndPicturesBtn.hide()})},{}],16:[function(require,module,exports){require("perfect-scrollbar"),window.cytubeEnhanced.addModule("utils",function(app,settings){"use strict";var that=this,defaultSettings={unfixedTopNavbar:!0,insertUsernameOnClick:!0,showScriptInfo:!0};settings=$.extend({},defaultSettings,settings),$("#messagebuffer, #queue").perfectScrollbar({suppressScrollX:!0}),this.handleChatScrollBar=function(){$("#messagebuffer").perfectScrollbar("update")},window.socket.on("chatMsg",that.handleChatScrollBar),window.socket.on("clearchat",that.handleChatScrollBar),this.handlePlaylistScrollBar=function(){$("#queue").perfectScrollbar("update")},window.socket.on("playlist",that.handlePlaylistScrollBar),window.socket.on("queue",that.handlePlaylistScrollBar),window.socket.on("setPlaylistMeta",that.handlePlaylistScrollBar),$(window).resize(function(){$("#messagebuffer, #queue").perfectScrollbar("update")}),window.chatTabComplete=function(){var i,words=$("#chatline").val().split(" "),current=words[words.length-1].toLowerCase();if(current.match(/^[\w-]{1,20}$/)){var __slice=Array.prototype.slice,usersWithCap=__slice.call($("#userlist .userlist_item")).map(function(elem){return elem.children[1].innerHTML}),users=__slice.call(usersWithCap).map(function(user){return user.toLowerCase()}).filter(function(name){return 0===name.indexOf(current)});if(0!==users.length){var min=Math.min.apply(Math,users.map(function(name){return name.length}));users=users.map(function(name){return name.substring(0,min)});for(var changed=!0,iter=21;changed;){changed=!1;var first=users[0];for(i=1;i<users.length;i++)if(users[i]!==first){changed=!0;break}if(changed&&(users=users.map(function(name){return name.substring(0,name.length-1)})),--iter<0)break}for(current=users[0].substring(0,min),i=0;i<usersWithCap.length;i++)if(usersWithCap[i].toLowerCase()===current){current=usersWithCap[i];break}1===users.length&&(1===words.length&&(current+=":"),current+=" "),words[words.length-1]=current,$("#chatline").val(words.join(" "))}}},this.addMessageToChatInput=function(message,position){position=position||"end","begin"===position?message+=$("#chatline").val():message=$("#chatline").val()+message,$("#chatline").val(message).focus()},settings.insertUsernameOnClick&&$("#messagebuffer").on("click",".username",function(){that.addMessageToChatInput($(this).text(),"begin")}),this.createModalWindow=function($headerContent,$bodyContent,$footerContent){var $outer=$('<div class="modal fade chat-help-modal" role="dialog" tabindex="-1">').appendTo($("body")),$modal=$('<div class="modal-dialog modal-lg">').appendTo($outer),$content=$('<div class="modal-content">').appendTo($modal);if(void 0!==$headerContent){var $header=$('<div class="modal-header">').appendTo($content);$('<button type="button" class="close" data-dismiss="modal" aria-label="Закрыть">').html('<span aria-hidden="true">&times;</span>').appendTo($header),$('<h3 class="modal-title">').append($headerContent).appendTo($header)}return void 0!==$bodyContent&&$('<div class="modal-body">').append($bodyContent).appendTo($content),void 0!==$footerContent&&$('<div class="modal-footer">').append($footerContent).appendTo($content),$outer.on("hidden.bs.modal",function(){$(this).remove()}),$outer.modal({keyboard:!0}),$outer},settings.unfixedTopNavbar&&$("#wrap").children(".navbar-fixed-top").removeClass("navbar-fixed-top"),settings.showScriptInfo&&$("#footer").children(".container").append('<p class="text-muted credit">CyTube Enhanced (<a href="https://github.com/kaba99/cytube-enhanced">GitHub</a>)</p>'),setTimeout(function(){window.handleWindowResize()},3e3),setTimeout(function(){window.handleWindowResize()},1e4)})},{"perfect-scrollbar":3}],17:[function(require,module,exports){window.cytubeEnhanced.addModule("videoControls",function(app,settings){"use strict";var that=this,defaultSettings={turnOffVideoOption:!0,selectQualityOption:!0,expandPlaylistOption:!0,showVideoContributorsOption:!0,playlistHeight:500};settings=$.extend({},defaultSettings,settings),$("#mediarefresh").hide(),this.$topVideoControls=$('<div id="top-video-controls" class="btn-group">').appendTo("#videowrap"),this.refreshVideo=function(){$("#mediarefresh").click()},this.$refreshVideoBtn=$('<button id="refresh-video" class="btn btn-sm btn-default" title="'+app.t("video[.]Refresh video")+'">').html('<i class="glyphicon glyphicon-refresh">').appendTo(this.$topVideoControls).on("click",function(){that.refreshVideo()}),this.hidePlayer=function($hidePlayerBtn){if($hidePlayerBtn.hasClass("btn-default")){var $playerWindow=$("#videowrap").find(".embed-responsive");$playerWindow.css({position:"relative"}),$('<div id="player-overlay">').appendTo($playerWindow),$hidePlayerBtn.html('<i class="glyphicon glyphicon-film">'),$hidePlayerBtn.removeClass("btn-default"),$hidePlayerBtn.addClass("btn-success")}else $("#player-overlay").remove(),$hidePlayerBtn.html('<i class="glyphicon glyphicon-ban-circle">'),$hidePlayerBtn.removeClass("btn-success"),$hidePlayerBtn.addClass("btn-default")},this.$hidePlayerBtn=$('<button id="hide-player-btn" class="btn btn-sm btn-default" title="'+app.t("video[.]Hide video")+'">').html('<i class="glyphicon glyphicon-ban-circle">').appendTo(this.$topVideoControls).on("click",function(){that.hidePlayer($(this))}),settings.turnOffVideoOption||this.$hidePlayerBtn.hide(),this.qualityLabelsTranslate={auto:"авто",240:"240p",360:"360p",480:"480p",720:"720p",1080:"1080p",best:app.t("video[.]best")};var qualityLabelsTranslateOrder=["auto",240,360,480,720,1080,"best"];this.$videoQualityBtnGroup=$('<div class="btn-group">').html('<button type="button" class="btn btn-default btn-sm video-dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+app.t("video[.]Quality")+": "+this.qualityLabelsTranslate[window.USEROPTS.default_quality||"auto"]+' <span class="caret"></span></button>').appendTo(this.$topVideoControls),this.$videoQualityList=$('<ul class="dropdown-menu">');for(var labelIndex=0,labelsLength=qualityLabelsTranslateOrder.length;labelsLength>labelIndex;labelIndex++)$("<li>").html('<a href="#" data-quality="'+qualityLabelsTranslateOrder[labelIndex]+'">'+this.qualityLabelsTranslate[qualityLabelsTranslateOrder[labelIndex]]+"</a>").appendTo(this.$videoQualityList);this.$videoQualityList.appendTo(this.$videoQualityBtnGroup),this.changeVideoQuality=function($qualityLink){this.settingsFix(),$("#us-default-quality").val($qualityLink.data("quality")),window.saveUserOptions(),this.$refreshVideoBtn.click(),this.$videoQualityBtnGroup.find("button").html(app.t("video[.]Quality")+": "+$qualityLink.text()+' <span class="caret"></span>'),$(".video-dropdown-toggle").dropdown()},this.$videoQualityBtnGroup.on("click","a",function(){return that.changeVideoQuality($(this)),!1}),$("#us-default-quality").on("change",function(){that.$videoQualityBtnGroup.find("button").html(app.t("video[.]Quality")+": "+that.qualityLabelsTranslate[$(this).val()]+' <span class="caret"></span>')}),settings.selectQualityOption||this.$videoQualityBtnGroup.hide(),this.settingsFix=function(){$("#us-theme").val(window.USEROPTS.theme),$("#us-layout").val(window.USEROPTS.layout),$("#us-no-channelcss").prop("checked",window.USEROPTS.ignore_channelcss),$("#us-no-channeljs").prop("checked",window.USEROPTS.ignore_channeljs),$("#us-synch").prop("checked",window.USEROPTS.synch),$("#us-synch-accuracy").val(window.USEROPTS.sync_accuracy),$("#us-wmode-transparent").prop("checked",window.USEROPTS.wmode_transparent),$("#us-hidevideo").prop("checked",window.USEROPTS.hidevid),$("#us-playlistbuttons").prop("checked",window.USEROPTS.qbtn_hide),$("#us-oldbtns").prop("checked",window.USEROPTS.qbtn_idontlikechange),$("#us-default-quality").val(window.USEROPTS.default_quality||"auto"),$("#us-chat-timestamp").prop("checked",window.USEROPTS.show_timestamps),$("#us-sort-rank").prop("checked",window.USEROPTS.sort_rank),$("#us-sort-afk").prop("checked",window.USEROPTS.sort_afk),$("#us-blink-title").val(window.USEROPTS.blink_title),$("#us-ping-sound").val(window.USEROPTS.boop),$("#us-sendbtn").prop("checked",window.USEROPTS.chatbtn),$("#us-no-emotes").prop("checked",window.USEROPTS.no_emotes),$("#us-modflair").prop("checked",window.USEROPTS.modhat),$("#us-joinmessage").prop("checked",window.USEROPTS.joinmessage),$("#us-shadowchat").prop("checked",window.USEROPTS.show_shadowchat)},this.expandPlaylist=function($expandPlaylistBtn){$expandPlaylistBtn.hasClass("btn-success")?($("#queue").css("max-height",settings.playlistHeight+"px"),$expandPlaylistBtn.attr("title",app.t("video[.]Expand playlist")),$expandPlaylistBtn.removeClass("btn-success"),$expandPlaylistBtn.addClass("btn-default")):($("#queue").css("max-height","100000px"),$expandPlaylistBtn.attr("title",app.t("video[.]Unexpand playlist")),$expandPlaylistBtn.removeClass("btn-default"),$expandPlaylistBtn.addClass("btn-success"),window.scrollQueue())},this.$expandPlaylistBtn=$('<button id="expand-playlist-btn" class="btn btn-sm btn-default" data-expanded="0" title="'+app.t("video[.]Expand playlist")+'">').append('<span class="glyphicon glyphicon-resize-full">').prependTo("#videocontrols").on("click",function(){that.expandPlaylist($(this))}),settings.expandPlaylistOption||this.$expandPlaylistBtn.hide(),this.$scrollToCurrentBtn=$('<button id="scroll-to-current-btn" class="btn btn-sm btn-default" title="'+app.t("video[.]Scroll the playlist to the current video")+'">').append('<span class="glyphicon glyphicon-hand-right">').prependTo("#videocontrols").on("click",function(){window.scrollQueue()}),this.showVideoContributorsList=function(){var $bodyWrapper=$("<div>"),contributorsList={};$("#queue .queue_entry").each(function(){var username=$(this).attr("title").replace("Added by: ","");void 0===contributorsList[username]?contributorsList[username]=1:contributorsList[username]+=1}),$bodyWrapper.append($("<p>"+app.t("video[.]Video's count")+": "+($("#queue .queue_entry").length+1)+"</p>"));var $contributorsListOl=$("<ol>");for(var contributor in contributorsList)contributorsList.hasOwnProperty(contributor)&&$contributorsListOl.append($("<li>"+contributor+": "+contributorsList[contributor]+".</li>"));$contributorsListOl.appendTo($bodyWrapper),app.getModule("utils").done(function(utilsModule){utilsModule.createModalWindow(app.t("video[.]Contributors' list"),$bodyWrapper)})},this.$videoContributorsBtn=$('<button id="video-contributors-btn" class="btn btn-sm btn-default" title="'+app.t("video[.]Contributors' list")+'">').append('<span class="glyphicon glyphicon-user">').prependTo("#videocontrols").on("click",function(){that.showVideoContributorsList()}),settings.showVideoContributorsOption||this.$videoContributorsBtn.hide()})},{}],18:[function(require,module,exports){window.cytubeEnhanced.addModule("videojsProgress",function(){"use strict";var that=this;this.handleProgress=function(){if(window.PLAYER instanceof window.VideoJSPlayer&&("Html5"===window.PLAYER.player.techName||"Html5"===window.PLAYER.player.Ua)){var $tipWrapper=$('<div class="vjs-tip">').insertAfter(".vjs-progress-control"),$tipBody=$('<div class="vjs-tip-body">').appendTo($tipWrapper);$('<div class="vjs-tip-body-arrow">').appendTo($tipBody);var $tipInner=$('<div class="vjs-tip-body-inner">').appendTo($tipBody);$(".vjs-progress-control").on("mousemove",function(e){var $seekBar=$(window.PLAYER.player.controlBar.progressControl.seekBar.el()),pixelsInSecond=$seekBar.outerWidth()/window.PLAYER.player.duration(),mousePositionInPlayer=e.pageX-$seekBar.offset().left,timeInSeconds=mousePositionInPlayer/pixelsInSecond,hours=Math.floor(timeInSeconds/3600),minutes=hours>0?Math.floor(timeInSeconds%3600/60):Math.floor(timeInSeconds/60);10>minutes&&hours>0&&(minutes="0"+minutes);var seconds=Math.floor(timeInSeconds%60);10>seconds&&(seconds="0"+seconds),hours>0?$tipInner.text(hours+":"+minutes+":"+seconds):$tipInner.text(minutes+":"+seconds),$tipWrapper.css("top",-($(".vjs-control-bar").height()+$(".vjs-progress-control").height())+"px").css("left",e.pageX-$(".vjs-control-bar").offset().left-$tipInner.outerWidth()/2+"px").show()}),$(".vjs-progress-control, .vjs-play-control").on("mouseout",function(){$tipWrapper.hide()})}},this.handleProgress(),window.socket.on("changeMedia",function(){that.handleProgress()})})},{}]},{},[5,4,6,7,8,9,10,11,12,13,14,15,16,17,18]);